language: python
python:
- '2.7'
addons:
  postgresql: '9.3'
services:
- postgresql
- elasticsearch
env:
  global:
  - DJANGO_SETTINGS_MODULE=aashe_bulletin.settings
  - DEBUG=True
  - DATABASE_URL=postgresql://postgres@localhost/bulletin
  - SECRET_KEY='hah'
  - MEDIA_URL='/media/'
  - CONSTANT_CONTACT_FROM_EMAIL='bulletin@aashe.org'
  - CONSTANT_CONTACT_REPLY_TO_EMAIL='bulletin@aashe.org'
  - AASHE_DRUPAL_URI="http://www.aashe.org/services/xmlrpc"
  - AASHE_DRUPAL_KEY_DOMAIN="bulletin.aashe.org"
  - AASHE_DRUPAL_COOKIE_DOMAIN=".aashe.org"
  # CONSTANT_CONTACT_API_KEY
  - secure: "C8yTCWXVpgC4gkGOyEj3DK9lAVP64nDid9k4Kyvn1h3hWUwV53kCN0FZZ6Ex4m6VvpRKT8dJtsQQHE6m8Gk0AmNAn409Tx/8rs4U3fUEZxp8x3NqIdVQGFr1TDAKxrszoeZlBWAcrEF5Jf/KB3K+ze/F37m5fJ5b2w9r4oIcjD1kAKoUeoiva6hVLAdqUgFx0UoJbhTIz7wP2bn4PPq9IlD0Or4dbCf58FgtnSALMfD1TB4bIJZbF9qA4d9vZeV/Jw2H9Gl1Gk4nRhDg9Jlo5rR6ncsuN7UJsM2WgL2ll5PeXzlkKL3Pe3Pqro03APxhDz64uEMt2PhD0YCyHlRJIl0W1D/QBaWy8S8Q1D3O2GRN/s2QQ6xn6i8Rx8mrDlzRcIzXE2XmdcTy6N7/WoUXtnfBDqwy30J1k+VL0e3zEuegqeHMnuRQLBGh+Gwf7qniGYUYb/E8Bd/fopNTymsBbsEUIeXutpSMlQUXhw5fIlfmn9dgC2vuKnRcJzhrcCebRKpd/+zFKmY954S207M7xZFxn3lr6zmGCTfrjChaAZNhCz1QjQUqU6v2qy4WIi6MMZLsIw+4DJdKsdXy2lXkMugb3t/PJVjk7ic68gkosOsH1kZNtWxt/Ppjgdijvla/oJIH1XBnCS8pI0s+CWfcxqNs+qzlbc5m9jhVYz26y7A"
  # CONSTANT_CONTACT_ACCESS_TOKEN
  - secure: "IA03rFC11sdDdIJbhsV7nCrESUgnzIGPLRxnlmd6rzDkHLVF/3PgEHBW6h/n08PsvpN+pp6LE2mq6VNXbp25zLIEONtgg4+TpcAC5Wv8m5SoeVzTXNTIwzQljnXghHT7zG+/BEkSR41zdwf0UgaZxYD7q+WOY3Hz9xKpqe2JhDjmJ0hdZOIqieVnSY0SdCrc5ZqBuqBmO0/IGpieLGAZAkJESJueldXgjJzf8e78tNK0oNb9K3whhuFkm7bkuCIkssHxNlEPuVAK8awOcEqMpRnDf2KAaw2ivVMHaCzQm0ij2xVwoPtoY9xWF0+fvIgKOqzpfJU0nwfsY2lxyRPFXkrnekrQO/3EdrXqW4HputX8UQ27kw91Ir3yeLgqeGjc2n7vfRvbjk27SsDW+4+VB0f9FS3wQIJR0xVpwOJn7vDlbLPmRHKT17E46wBzHn0lYBM0kPcaooUGBc53FSROtQDfpiHQnwglCc30P2UFYFbIe7Uhbyh2KeAhlu0pGu4oJRJzleXsh6uXnFOsFE03MZctnClSDvjbQ1W3M+zJkX617WLt+UArqIycqlUYTDe/0XhJFUO2maQ8tll9A0JpXoePvYpn7vPp2uTTEkrPwZ+073AKFVN7XSSr08ueN+fOK+0ALU4y6PZohURPU4lUbV5BQLt3QCisYnzPpgzqdxE"
  # CONSTANT_CONTACT_USERNAME
  - secure: "HuJODItsFCuXQqWXPFTIx21NQfH02lDLXrse8bO52u3eJ9bA3tV+3A2VssU+EZZibuCtli3YEt3Ue6WaiDsqYUDjDKvcErUElsvWfwPChpyocN+eh3yWbD1g6tSuA3MT1YOH3r0Xs/DQIjnFKLu7Fm+dx+FsGfUBbrhy+SUBGEPrYSkRno5hR+pCpbrp+yAcDrqavcXinZ4EIm4gWwsQoxu2ruKg5aExXH2NlLwS/J52odWtjSZ8XLOd3nGvxQxTnadLy5knBM/u/tRi577LIULrUlmMlEkC2O5WqobNEZIyTIiLy3eq1/VHREtd5S9niNRTknijQxDv1+uw0FD6P/4xTqfZCfyKZ/xZEC+OpHKe4bJGjC6ZYZvVunK69XiRtZmEYUPiLQTvz2oO7lJ8Vv3xsZVuOYthpShiSLcZncxs+VNxTZbwCMBP0pDzf/0jO5l4cvlxeaNH+kzu8tgLXa8Hv/0btGEKv/HGNDy0V0ouLAXC8e/vbmmF2vZB9484/e4mmOdPT597Qh7DRDB74bNiSlgCmTuzlZhJ4dDTYc9lzOQ8F6W2xwg+eCj3zIydaJ3SnQfC1ykNOEjRwpT7C271cke6Q0MF8lyKlAeTesE/iO4uge3DoxR3gyJEijVHxpt099jxUJpBrGRUgrn17vhmJkR9r83XyObIDgtV3Us"
  # CONSTANT_CONTACT_PASSWORD
  - secure: "G8yOMbPxDJnWhe/7If8J6lDI7jmss9wi4akx10KIsFwCirdZEli8X3GZtHouLITTejvPmvpkpmglCDge2n2E+q7EEgGLx78Y8/B+pcwSSe2MEE+kSKmINxxveOPNuKldvvM28AvhrYx5E7b+d9fLgZ08S+BTXrDJaG7ZUaYLONsB8ur5g/UIf4TcWhCexpLsQp8zDG61DWBjh6E680EAJn0LdZ3gOV2PZ4sl8W8PHrdbEBqzK8lOhA5hRdMIOjvkLIwicCRY0p6yupERNj6ucNQzLkxy7jnkEfXsfDyzcem2198BMlu2MWvdEbr3eLKhOAfqe+eH0OkYvMtyTnkXLPrh4ftUJdlSuee7964otaMa2Io3QoITWLJ6dlxTjaqmp+hn7d7jdK658RKkz7kM84LmJq0frnGl5jzb8J/hlvTewshsohb4d0TCYtAP5Rlkni43iwC/PwhoUPRLw07NFdfzQDJyrXrQHpqRMx9J0lbdKsg2lp4R7ivOCvBVYSBRItrppoRN0TxcdrXl+zg8gHXYWev9Id9AxG5u/sdFRI7I0rCVDsQH1aZUTL6mPc9DMEdkQKsyu+4ISVfy6b6LfeYLxBrIQFshNCMSs4NjZWeJiPgGQvV8rravLTd08I0R33mRdJX1/AYMiEvywKs0cJYFKhFwEk7/eeX4lcl1VKw"
  # AASHE_DRUPAL_KEY
  - secure: "EU4CWQiH+mIDc7+ZezzEelobDQTYVjDRwaEdJToyNX+7KCv6N6BzTdmjBpki8Q+rNw++7zsb30p3Ozjr9DlTTrW1WRi3z1SBsqOTdFD7Be2+Dcg7VJNCLEOg/dgoLaxxN9ANDTWQFS1K4DG/uzt6DixGpFSRMqkH0omJBsgZxcuxwsSsgFmG0ECcd1DPwhhdaIJHuZ2/V4xwcbAM/pdxK3Dd8M6s0/Huyt0Z+Mupk3zBayy+T1smnxQMQ/k0sfQwrKC4ueEmQXkNQEKACfP/FjasMFaBwILQ/wHPgBL8gxNq3Qm7Z5G2lyRCyIcHMW2b4c9qVoHPzmTuXmHydDKY3Q85UMZLIfqfZAazL9rglFR/8Pvzx4bIf2I3z/jjQihOQpRi9/8DUD/Ytz1ubdX2EJxiv/+Hl+QWaQBzQgILUESJs9noojNDHaOK/UtcMTsvwxI2txrQeTyjAK68n6wcAXHAksLbjFsUpb+mxTB6sTfg1T3sAYn1VZ9/huqi4URENMDdlFcRxZ9nPtvUVGf+a4lYXZ19OuyECXy+3pjByC8kbEj+RlA7gFFeb1i1GnG9jsWdGaOA2Y74Hqj1L0WVWAaUmgryUlgnfXL3blvtyvE+zFeE0nriwaYgDbOdjKfpxz677TbCU5xK7rxlvXc/w2nNH9EvFGLSaimvxtYIKRM"
  # AASHE_DRUPAL_COOKIE_SESSION
  - secure: "T6gIzlSC2MnSLQ0jYaK+mGzD7JEC/4UNH24DDS8eZD5lPq1GEWAdk8SuTfRPbStg3RX8Re6HA3Zc96Vn+kEDsoAte4JZG+bvX3BJbQtOYR91X3W/MwrMBHtyKEi88lfISdA0bpu37Nzhb2WInZYc0ocI4N+3k6JffP9xAyqyM/hfb9Cgfli7xCdK3va+D+FVc2pIcImI1P/rcKoTLNZUyMrhXem4l5HVSUo316acalwPWAK4/+fYbqh6zBNIsUwS7hyaBkZGydPG9dqjJSgVooJM6Y03KhljrKLBNe/n9UY/vaR1C3YF8kIKs2cnQvRPLOu1urwnVnRVpoX5nBKJnDYHLOBv/l9myKrgpjqFVfOPDrWxrLMdbLM8Za7hn220mDowcA82oRwZtF19rgcSJ68A7IyldQhvLh/n4/4KdN/x1o6/jEA57opuBbj7Dnrj3Cn2hZzgi+STysdh2htS0cRXTgIeIPm7YyRghVeuxBZaVn9xgxNakjlbJFgzNC0KJmp0xOU9ai6Ql4hh08kDgG+9aRahPZqozzPNUWH6lXR7Eew+Uyq7nHfmBZtNPwoX2gFj7UtF3hzd07NYezCQl0KcdYwPBz/tYoIMs7FKbl952dna/A0Hgy4ZpmyaKMtS3ov+PpD059UYvSp9cMOf1zOfEInihjc70hkFgIXZaIE"
  # RAVEN_DSN
  - secure: "K2B655hI6FGaiBVWL7cnASaWC60+zsGA1XLLGuo8DoipRB4y5t3yB/IvDt85uuIKUZCXJ0jiTYvojQnd1YjW1y4+NrhNxAO5PgBMtxqumhc7tSP/oWhWBppOMTp4Ft3aPnwtOxBo5zGcGO0VU+yYssm86jCvjeuJaoBNlCQVrsFQgfLe/ZejUkFfDZQ1SYwaRwoPN7Dt1m6b6mqaNrBnxGJRY/NF+bfqnJ1K5dc8wJeuHVyX67sqA7SP7/zEYfHAFc09i9kw9BYRpXXBeNPvWvRhPEA0fUz4yhTsbeSKZQw1GGncQgLlZA8+X9zvln8OPs8J6PgBDQ9bL4AJGsMB/mWby8Il4Msmz6NkJRVKcw25sYqcqUa+XwEQlQov6pb7B6RmAvRXbCs6Qk7Mp7hSe4NLykah2m3Rz9Q/E414vwBI7ra0cljE8hfAGURR44TU/zUbgNZUzD6DB29fTyprlia5Lh+GGqCWp3c9CTQYoFI3So8SurOKfXANulQ6zoDu+VVVjG2JR4KBVs0LusPrfvRlqby7fgLVFq98EyRZsjNgU7h0HpwzedIjbenmK4SI5ARDW2UV8YWuz04q6XmnmnxqRarxq4fbbZTDU+4gUdbH/DUrbyJXZxoGVGXJfedqF92EPIwvNYHZ5TyjhrrFOUHFN4NTt/ktkUYIzY6YnK8"
install:
- pip install -U pip
- pip install -U setuptools
- pip install -r requirements.txt
- pip install -r requirements_test.txt
before_script:
- python manage.py collectstatic --noinput -v0
script: coverage run manage.py test -v3
after_success: coveralls
notifications:
  hipchat: 5534a6204d6caa1a45ac2444282aca@WebDevActivity
  email: false
