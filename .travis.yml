language: python
python:
- '2.7'
addons:
  postgresql: '9.3'
services:
- postgresql
- elasticsearch
env:
  global:
  - DJANGO_SETTINGS_MODULE=aashe_bulletin.settings
  - DEBUG=True
  - DATABASE_URL=postgresql://postgres@localhost/bulletin
  - SECRET_KEY='hah'
  - MEDIA_URL='/media/'
  - CONSTANT_CONTACT_FROM_EMAIL='bulletin@aashe.org'
  - CONSTANT_CONTACT_REPLY_TO_EMAIL='bulletin@aashe.org'
  - AASHE_DRUPAL_URI="http://www.aashe.org/services/xmlrpc"
  - AASHE_DRUPAL_KEY_DOMAIN="bulletin.aashe.org"
  - AASHE_DRUPAL_COOKIE_DOMAIN=".aashe.org"
  # CONSTANT_CONTACT_API_KEY
  - secure: "C8yTCWXVpgC4gkGOyEj3DK9lAVP64nDid9k4Kyvn1h3hWUwV53kCN0FZZ6Ex4m6VvpRKT8dJtsQQHE6m8Gk0AmNAn409Tx/8rs4U3fUEZxp8x3NqIdVQGFr1TDAKxrszoeZlBWAcrEF5Jf/KB3K+ze/F37m5fJ5b2w9r4oIcjD1kAKoUeoiva6hVLAdqUgFx0UoJbhTIz7wP2bn4PPq9IlD0Or4dbCf58FgtnSALMfD1TB4bIJZbF9qA4d9vZeV/Jw2H9Gl1Gk4nRhDg9Jlo5rR6ncsuN7UJsM2WgL2ll5PeXzlkKL3Pe3Pqro03APxhDz64uEMt2PhD0YCyHlRJIl0W1D/QBaWy8S8Q1D3O2GRN/s2QQ6xn6i8Rx8mrDlzRcIzXE2XmdcTy6N7/WoUXtnfBDqwy30J1k+VL0e3zEuegqeHMnuRQLBGh+Gwf7qniGYUYb/E8Bd/fopNTymsBbsEUIeXutpSMlQUXhw5fIlfmn9dgC2vuKnRcJzhrcCebRKpd/+zFKmY954S207M7xZFxn3lr6zmGCTfrjChaAZNhCz1QjQUqU6v2qy4WIi6MMZLsIw+4DJdKsdXy2lXkMugb3t/PJVjk7ic68gkosOsH1kZNtWxt/Ppjgdijvla/oJIH1XBnCS8pI0s+CWfcxqNs+qzlbc5m9jhVYz26y7A"
  # CONSTANT_CONTACT_ACCESS_TOKEN
  - secure: "IA03rFC11sdDdIJbhsV7nCrESUgnzIGPLRxnlmd6rzDkHLVF/3PgEHBW6h/n08PsvpN+pp6LE2mq6VNXbp25zLIEONtgg4+TpcAC5Wv8m5SoeVzTXNTIwzQljnXghHT7zG+/BEkSR41zdwf0UgaZxYD7q+WOY3Hz9xKpqe2JhDjmJ0hdZOIqieVnSY0SdCrc5ZqBuqBmO0/IGpieLGAZAkJESJueldXgjJzf8e78tNK0oNb9K3whhuFkm7bkuCIkssHxNlEPuVAK8awOcEqMpRnDf2KAaw2ivVMHaCzQm0ij2xVwoPtoY9xWF0+fvIgKOqzpfJU0nwfsY2lxyRPFXkrnekrQO/3EdrXqW4HputX8UQ27kw91Ir3yeLgqeGjc2n7vfRvbjk27SsDW+4+VB0f9FS3wQIJR0xVpwOJn7vDlbLPmRHKT17E46wBzHn0lYBM0kPcaooUGBc53FSROtQDfpiHQnwglCc30P2UFYFbIe7Uhbyh2KeAhlu0pGu4oJRJzleXsh6uXnFOsFE03MZctnClSDvjbQ1W3M+zJkX617WLt+UArqIycqlUYTDe/0XhJFUO2maQ8tll9A0JpXoePvYpn7vPp2uTTEkrPwZ+073AKFVN7XSSr08ueN+fOK+0ALU4y6PZohURPU4lUbV5BQLt3QCisYnzPpgzqdxE"
  # CONSTANT_CONTACT_USERNAME
  - secure: "HuJODItsFCuXQqWXPFTIx21NQfH02lDLXrse8bO52u3eJ9bA3tV+3A2VssU+EZZibuCtli3YEt3Ue6WaiDsqYUDjDKvcErUElsvWfwPChpyocN+eh3yWbD1g6tSuA3MT1YOH3r0Xs/DQIjnFKLu7Fm+dx+FsGfUBbrhy+SUBGEPrYSkRno5hR+pCpbrp+yAcDrqavcXinZ4EIm4gWwsQoxu2ruKg5aExXH2NlLwS/J52odWtjSZ8XLOd3nGvxQxTnadLy5knBM/u/tRi577LIULrUlmMlEkC2O5WqobNEZIyTIiLy3eq1/VHREtd5S9niNRTknijQxDv1+uw0FD6P/4xTqfZCfyKZ/xZEC+OpHKe4bJGjC6ZYZvVunK69XiRtZmEYUPiLQTvz2oO7lJ8Vv3xsZVuOYthpShiSLcZncxs+VNxTZbwCMBP0pDzf/0jO5l4cvlxeaNH+kzu8tgLXa8Hv/0btGEKv/HGNDy0V0ouLAXC8e/vbmmF2vZB9484/e4mmOdPT597Qh7DRDB74bNiSlgCmTuzlZhJ4dDTYc9lzOQ8F6W2xwg+eCj3zIydaJ3SnQfC1ykNOEjRwpT7C271cke6Q0MF8lyKlAeTesE/iO4uge3DoxR3gyJEijVHxpt099jxUJpBrGRUgrn17vhmJkR9r83XyObIDgtV3Us"
  # CONSTANT_CONTACT_PASSWORD
  - secure: "G8yOMbPxDJnWhe/7If8J6lDI7jmss9wi4akx10KIsFwCirdZEli8X3GZtHouLITTejvPmvpkpmglCDge2n2E+q7EEgGLx78Y8/B+pcwSSe2MEE+kSKmINxxveOPNuKldvvM28AvhrYx5E7b+d9fLgZ08S+BTXrDJaG7ZUaYLONsB8ur5g/UIf4TcWhCexpLsQp8zDG61DWBjh6E680EAJn0LdZ3gOV2PZ4sl8W8PHrdbEBqzK8lOhA5hRdMIOjvkLIwicCRY0p6yupERNj6ucNQzLkxy7jnkEfXsfDyzcem2198BMlu2MWvdEbr3eLKhOAfqe+eH0OkYvMtyTnkXLPrh4ftUJdlSuee7964otaMa2Io3QoITWLJ6dlxTjaqmp+hn7d7jdK658RKkz7kM84LmJq0frnGl5jzb8J/hlvTewshsohb4d0TCYtAP5Rlkni43iwC/PwhoUPRLw07NFdfzQDJyrXrQHpqRMx9J0lbdKsg2lp4R7ivOCvBVYSBRItrppoRN0TxcdrXl+zg8gHXYWev9Id9AxG5u/sdFRI7I0rCVDsQH1aZUTL6mPc9DMEdkQKsyu+4ISVfy6b6LfeYLxBrIQFshNCMSs4NjZWeJiPgGQvV8rravLTd08I0R33mRdJX1/AYMiEvywKs0cJYFKhFwEk7/eeX4lcl1VKw"
  # DMA_COOKIE_DOMAIN
  - secure: "XG8QmTAVOUFW1UKLSrYwViiL9GTYO+T/BnB+xCarcFBg//DzpyksLvPv9bp23DNdG+c1QIg7koN1LLS3SmGxKz5G8QQ/Ce+rI2X0gUPuTRQ6jLF2hmPubNgZHaL78kT1NHa12b3Je88/NlgfrVBKsKGEaOxIATuQxUT6eNA7icaHlrx7fN/hxdWxAjn4ewMq4Aq5nm7EDx9GOd4f5YzH9I47dQPXu5csou9mBK4mhvsKxu8vtPp/bd1LBWZIptUVriHgXgrOeP4cwwOJVU/3YOrRSTmXIKt5qLlg2x2cOirm8rErZ2nzdgDfpsuXDxYC93anniwt6gilFcM0+cdBt/eEVE4fBqnVKmgsWHYud2u7v6vNG8WQjfQic0qC1eXrvPzfvEIF8cEhsx4c54qFp646VL3EapSVMbOSNVAwNVizwxQiX/1CQEjLWp/v4/hf8NzKZafAQp4nPq6bAubg+62tqDxNwtTSTCYurmyc9Bk5DU4+5XXAG3s8SMJiXInrTskAKGpMCnby7kiS4kPvGwtcZDqvK6QTty7g9gJmWqs0RwECE+4DW/wjy3D6lJQC7a9AvOFNGalO+8gYcefrddq9kCTkYJHxE18FiCRI9ma/YSiEXb1VrYAH94KfN4hfh+OVxL6puMq0fITixxCPLH2G04yKeFGeMeiEafCS6I0="
  # DMA_COOKIE_SESSION
  - secure: "Czhun6F+c0OtCL2XvzQnk/KB+hFJTYP8iP2hlQFxviatIGuVc88N4d60S+6QFovGomrN1ryvZw7L4vnV3ZpSe4LWNuFRq2BPS7n58JevBfnk5FkePP+NL/bIcLgD+WI6VbUOj6p8wZHSp1U3gpxBAeuRpcMhpF70SuKv+wsOXpQO0WQmp+FUtFdJlPFvOYCUb5U4xuSeWvqB1s424ulA8+RZZobih+u6a4ijNA8mtW8HWKJtNTYCp02s7WvBTCpf/cx1lnbdkaYKQ5XTGh8uZUrOIxNogBsWKPYDkIPcb3AHiB528TxJJPll/TGGD8DfT7EbSQZki/j2dUc78lrnlEpQaKmUxIIqrQH419Nksg1aw31A836XOoFYvR8/6mpnOYjd5TYy1P9TfWpF7pFqyN2RokIcZPnbotrVyEofxHIQIwrcMYxs/QSGWmnl6X5ufSJX5vWkshiRfXHeg1x6LD1lQAJpwVFHBHSf6T2pHCXWu/gTop8FK2VESnBBNEO15URyjAttyaZvxoAaVw/RWdk7mLCBhULYXeKAYV0lwU3cngu10MhNDgPaDk1UBBKrQsexQiwLXSxCtlcWkkT8/bt2lO4j2VfB/Jfhsty06QEcSMeopBWEndJLno4LvmWlWtxHt8RlrZSdRyMmqbTUoUl0BwRTe+tS6DqlStntKsI="
  # MS_ACCESS_KEY
  -  secure: "b+ozfiC3Aa26/8kyVu7mZ1YnxnnNyFa/DQCxp/SBK920EBh6IebAyDUF9ODcuZPwGvqpEZ860Sg3nxXLHGu0wrPpEVfwzsQSkf6NJCzRuU37cyTe2oLNFiIUKDNcLhLNWM42BXChgInS91llQM4H+vz358Rpzm4toZ7IaVhQPGOwO9qrWNayYt0TrWNyytqSZoDTcec0MxyiMYPA6U4sDHkVJAoO1IdhdpKMgra5QosEHCXk3QEeAtKHMkpsIS24pkz+KkWvZftOuMjtbiD855vVM9VmJCQSxWZi/7AF4hUg6X3gYajCR4JnT9Jj4Jt2v6xLLm+VeNZZfd5ra3H8chwpzV4U+DbHAACx6gpRw9ZIYB4L7cZ1oJBMRpFLQTThPdQ5CghnUQNIgTz/tqTnxkESIoVZv3aVJIz79LBV9XitQQJRLnJSFBUQut1VPA3MG0FD8grJytihj4DTc7Kx8vI5FwdEhiDHM70HYrpzFVqflTNwtHM9YHkBr2Zsk0HZINYW3ab5WTRPrKTj7nOHoDlC47m2f2/32P/SO8NCA5IZOtBzPxXxoulMQ9wu1ixWv4y05PemKodrVdW81IQp/i0NRz4Sp36dKT9CJ3ewfo/t18ofLjJCmtK0dDBIxlLquKYEc60zwUR5/m285mpVUQ2ANPARRFAorDBxmTmVUrQ="
  # MS_SECRET_KEY
  - secure: "V451eQVsf+V5zZuc/VHREye17ItgLKSppNx6lqFkj9ULFvRVkLIOUdAJ3HKtBDsr5I4sUo/+Ch2Vx+IuItTiWH1qoOcXH7jXMtHo2JqcY2aFAaR5JtrHifypF6Q6Ygnh/2CDF3tLowRfV2ucN3TuMlUFZoq9/wigscT2UdfrprM9Bo8Uvf6WIYkha0+8iI5S8anspR9DXfAAeiUik9zX0yPXR0RoYkRadJqmkE3rK6gmJNecz7S1t97czboGwerKmucjJVg5oXL2EjBi1uxQWopybB9cLfztlC39lcahAavkw7yIPZH/sGGVtOUtm3iU7yYgk9jXBv90d2Hcnc/jt6ZH/NFlO++VeIAaPedDz8yQ2R3utRMzYXAw5SLXz7mMPoz4mEbulmGdjZhlXT9ApKzdx6gjRxTQ4F1Bb4pdNAmhkFVo2Eqj28bPZj8HHUyVAQAQRE80gAFaA8JmlANA7buasbvRoYJYkg05YjndBKMH0bGVcbkYZ9Lzmaa5w9kdNStNRBveE2Fa7JXDnZpoUx7kjV7Oz8u6UCRqqDl2M0d+YR37/JLhAjSWOri7nRBNP/r5MREyQNXf5ceG7Y3HHpS7aEL4DpmfrUYK8XMrPRUyEwjvWJu2z7k9Bm1K2TMPWr0NdksuWliH5B7OIdzGcob5mFrOWwI3cmYKwCNGhNQ="
  # MS_ASSOCIATION_ID
  - secure: "GMaDx1JJt+gM3aTpP75Eiv382h0fymye/JkbjqXv9QAjR2rE50Ngc0PeSEi+ABUVBNTvxDe0ZtE17U1COTFHUjlZAt+fN6KneScZeuQT43q1BzWy7PqZycgW47VsttyRn1GXByYQ0SOrtyksVSeONWajuDOqylzeJzopobXVav9bjW9m5TVREbN1lLHaaMaOS0EOw8RK//qnN9LHg/osqlAITAmdAUt+K64vjo/CrTwutolP7vFv7zsep84it/+VY1e7sku02yjfypc52IQJdaW7QKXcEZp7qljbOwaTsU0dKszj4DAjRi7jIgWM5OIebgiyyOa9HdrnVuJcJV5k0cK5Ykhrf9vrimW2TjwYQgFDnbfjiJ8ACxnVnjBVaP20AfpmCwTSte0oiTBWtvhYc8uTNarlL8ZC41N05ywxUUHVnfXszwZrae/1YdeWasgicNBY/wX6ljfPkhfHyHl28LYa7tTS1T8FiJkNKyALbBJyDTRwIjaOk1ExoM7yQdIxIBmsGSLYFe95ccTEt/GS18x8kHKAT5jGIM+U9CoHHp022rbjq/PIeosVgqrTXFP5g3nvgsSgneIZeia27AwgJChKGKOuofQ2sqbkrqrJC38fh6sca00AVOoO9sVE1qf/m3NsYxzndHuGweA8+PFuMOsi21d+LTfXmyx3JCRXeAA="
  # RAVEN_DSN
  - secure: "K2B655hI6FGaiBVWL7cnASaWC60+zsGA1XLLGuo8DoipRB4y5t3yB/IvDt85uuIKUZCXJ0jiTYvojQnd1YjW1y4+NrhNxAO5PgBMtxqumhc7tSP/oWhWBppOMTp4Ft3aPnwtOxBo5zGcGO0VU+yYssm86jCvjeuJaoBNlCQVrsFQgfLe/ZejUkFfDZQ1SYwaRwoPN7Dt1m6b6mqaNrBnxGJRY/NF+bfqnJ1K5dc8wJeuHVyX67sqA7SP7/zEYfHAFc09i9kw9BYRpXXBeNPvWvRhPEA0fUz4yhTsbeSKZQw1GGncQgLlZA8+X9zvln8OPs8J6PgBDQ9bL4AJGsMB/mWby8Il4Msmz6NkJRVKcw25sYqcqUa+XwEQlQov6pb7B6RmAvRXbCs6Qk7Mp7hSe4NLykah2m3Rz9Q/E414vwBI7ra0cljE8hfAGURR44TU/zUbgNZUzD6DB29fTyprlia5Lh+GGqCWp3c9CTQYoFI3So8SurOKfXANulQ6zoDu+VVVjG2JR4KBVs0LusPrfvRlqby7fgLVFq98EyRZsjNgU7h0HpwzedIjbenmK4SI5ARDW2UV8YWuz04q6XmnmnxqRarxq4fbbZTDU+4gUdbH/DUrbyJXZxoGVGXJfedqF92EPIwvNYHZ5TyjhrrFOUHFN4NTt/ktkUYIzY6YnK8"
install:
- pip install -U pip
- pip install -U setuptools
- pip install -r requirements.txt
- pip install -r requirements_test.txt
before_script:
- python manage.py collectstatic --noinput -v0
script: coverage run manage.py test -v3
after_success: coveralls
notifications:
  hipchat: 5534a6204d6caa1a45ac2444282aca@WebDevActivity
  email: false
